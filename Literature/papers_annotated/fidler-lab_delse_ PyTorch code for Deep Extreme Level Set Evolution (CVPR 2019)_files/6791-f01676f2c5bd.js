"use strict";(()=>{var O=Object.defineProperty;var a=(T,L)=>O(T,"name",{value:L,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[6791],{52134:(T,L,u)=>{u.d(L,{H:()=>l,v:()=>c});var m=u(59753);function c(){const s=document.getElementById("ajax-error-message");s&&(s.hidden=!1)}a(c,"showGlobalError");function l(){const s=document.getElementById("ajax-error-message");s&&(s.hidden=!0)}a(l,"hideGlobalError"),(0,m.on)("deprecatedAjaxError","[data-remote]",function(s){const n=s.detail,{error:t,text:r}=n;s.currentTarget===s.target&&(t==="abort"||t==="canceled"||(/<html/.test(r)?(c(),s.stopImmediatePropagation()):setTimeout(function(){s.defaultPrevented||c()},0)))}),(0,m.on)("deprecatedAjaxSend","[data-remote]",function(){l()}),(0,m.on)("click",".js-ajax-error-dismiss",function(){l()})},52660:(T,L,u)=>{u.d(L,{D:()=>s,a:()=>l});var m=u(2699),c=u(10900);async function l(n,t,r){const p=new Request(t,r);p.headers.append("X-Requested-With","XMLHttpRequest");const h=await self.fetch(p);if(h.status<200||h.status>=300)throw new Error(`HTTP ${h.status}${h.statusText||""}`);return(0,m.t)((0,m.P)(n),h),(0,c.r)(n,await h.text())}a(l,"fetchSafeDocumentFragment");function s(n,t,r=1e3){return a(async function p(h){const w=new Request(n,t);w.headers.append("X-Requested-With","XMLHttpRequest");const g=await self.fetch(w);if(g.status<200||g.status>=300)throw new Error(`HTTP ${g.status}${g.statusText||""}`);if(g.status===200)return g;if(g.status===202)return await new Promise(y=>setTimeout(y,h)),p(h*1.5);throw new Error(`Unexpected ${g.status} response status from poll endpoint`)},"poll")(r)}a(s,"fetchPoll")},82036:(T,L,u)=>{u.d(L,{Bt:()=>n,DN:()=>p,KL:()=>g,Se:()=>r,qC:()=>y,sw:()=>h});var m=u(59753),c=u(90137),l=u(52134);(0,m.on)("click",".js-remote-submit-button",async function(o){const _=o.currentTarget.form;o.preventDefault();let e;try{e=await fetch(_.action,{method:_.method,body:new FormData(_),headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})}catch{}e&&!e.ok&&(0,l.v)()});function s(o,d,_){return o.dispatchEvent(new CustomEvent(d,{bubbles:!0,cancelable:_}))}a(s,"fire");function n(o,d){d&&(t(o,d),(0,c.j)(d)),s(o,"submit",!0)&&o.submit()}a(n,"requestSubmit");function t(o,d){if(!(o instanceof HTMLFormElement))throw new TypeError("The specified element is not of type HTMLFormElement.");if(!(d instanceof HTMLElement))throw new TypeError("The specified element is not of type HTMLElement.");if(d.type!=="submit")throw new TypeError("The specified element is not a submit button.");if(!o||o!==d.form)throw new Error("The specified element is not owned by the form element.")}a(t,"checkButtonValidity");function r(o,d){if(typeof d=="boolean")if(o instanceof HTMLInputElement)o.checked=d;else throw new TypeError("only checkboxes can be set to boolean value");else{if(o.type==="checkbox")throw new TypeError("checkbox can't be set to string value");o.value=d}s(o,"change",!1)}a(r,"changeValue");function p(o,d){for(const _ in d){const e=d[_],i=o.elements.namedItem(_);(i instanceof HTMLInputElement||i instanceof HTMLTextAreaElement)&&(i.value=e)}}a(p,"fillFormValues");function h(o){if(!(o instanceof HTMLElement))return!1;const d=o.nodeName.toLowerCase(),_=(o.getAttribute("type")||"").toLowerCase();return d==="select"||d==="textarea"||d==="input"&&_!=="submit"&&_!=="reset"||o.isContentEditable}a(h,"isFormField");function w(o){return new URLSearchParams(o)}a(w,"searchParamsFromFormData");function g(o,d){const _=new URLSearchParams(o.search),e=w(d);for(const[i,f]of e)_.append(i,f);return _.toString()}a(g,"combineGetFormSearchParams");function y(o){return w(new FormData(o)).toString()}a(y,"serialize")},2699:(T,L,u)=>{u.d(L,{P:()=>m,t:()=>l});function m(s){const n=[...s.querySelectorAll("meta[name=html-safe-nonce]")].map(t=>t.content);if(n.length<1)throw new Error("could not find html-safe-nonce on document");return n}a(m,"getDocumentHtmlSafeNonces");class c extends Error{constructor(n,t){super(`${n} for HTTP ${t.status}`);this.response=t}}a(c,"ResponseError");function l(s,n,t=!1){const r=n.headers.get("content-type")||"";if(!t&&!r.startsWith("text/html"))throw new c(`expected response with text/html, but was ${r}`,n);if(t&&!(r.startsWith("text/html")||r.startsWith("application/json")))throw new c(`expected response with text/html or application/json, but was ${r}`,n);const p=n.headers.get("x-html-safe");if(p){if(!s.includes(p))throw new c("response X-HTML-Safe nonce did not match",n)}else throw new c("missing X-HTML-Safe nonce",n)}a(l,"verifyResponseHtmlSafeNonce")},9115:(T,L,u)=>{var m=u(90420),c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,s=a((t,r,p,h)=>{for(var w=h>1?void 0:h?l(r,p):r,g=t.length-1,y;g>=0;g--)(y=t[g])&&(w=(h?y(r,p,w):y(w))||w);return h&&w&&c(r,p,w),w},"__decorateClass");let n=a(class extends HTMLElement{connectedCallback(){this.control&&(this.storedInput=Array(this.control.children.length).fill("")),this.addEventListener("input",this.relayInput.bind(this)),this.addEventListener("keydown",this.relayKeydown.bind(this));const t=this.closest("details");t&&t.addEventListener("toggle",()=>{t.open&&this.source.focus()})}relayKeydown(t){if((this.isControlTab(t.target)||t.target===this.source)&&(t.key==="ArrowDown"||t.key==="Tab"))t.preventDefault(),t.stopPropagation(),this.routeCustomEvent(new CustomEvent("focus-list"));else if(t.key==="Escape"){const r=this.closest("details");r&&r.removeAttribute("open")}}isControlTab(t){return!t||!this.control?!1:Array.from(this.control.children).includes(t)}relayInput(t){if(!t.target)return;const p=t.target.value;this.routeCustomEvent(new CustomEvent("input-entered",{detail:p}))}routeCustomEvent(t){this.sinks[this.selectedIndex].dispatchEvent(t)}get selectedIndex(){if(!this.control)return 0;const t=this.control.querySelector('[aria-selected="true"]');return t?Array.from(this.control.children).indexOf(t):0}storeInput(){this.storedInput[this.selectedIndex]=this.source.value}updateInput(t){this.source.value=this.storedInput[this.selectedIndex];const r=t.detail.relatedTarget.getAttribute("data-filter-placeholder");this.source.placeholder=r,this.source.setAttribute("aria-label",r),this.notifySelected()}notifySelected(){const t=this.sinks[this.selectedIndex],r=new CustomEvent("tab-selected");t.dispatchEvent(r)}},"InputDemuxElement");s([m.fA],n.prototype,"source",2),s([m.GO],n.prototype,"sinks",2),s([m.fA],n.prototype,"control",2),n=s([m.Ih],n)},84570:(T,L,u)=>{u.d(L,{ZG:()=>n,q6:()=>r,w4:()=>t});var m=u(8439);let c=!1;const l=new m.Z;function s(p){const h=p.target;if(h instanceof HTMLElement&&h.nodeType!==Node.DOCUMENT_NODE)for(const w of l.matches(h))w.data.call(null,h)}a(s,"handleFocus");function n(p,h){c||(c=!0,document.addEventListener("focus",s,!0)),l.add(p,h),document.activeElement instanceof HTMLElement&&document.activeElement.matches(p)&&h(document.activeElement)}a(n,"onFocus");function t(p,h,w){function g(y){const o=y.currentTarget;!o||(o.removeEventListener(p,w),o.removeEventListener("blur",g))}a(g,"blurHandler"),n(h,function(y){y.addEventListener(p,w),y.addEventListener("blur",g)})}a(t,"onKey");function r(p,h){function w(g){const{currentTarget:y}=g;!y||(y.removeEventListener("input",h),y.removeEventListener("blur",w))}a(w,"blurHandler"),n(p,function(g){g.addEventListener("input",h),g.addEventListener("blur",w)})}a(r,"onInput")},68906:(T,L,u)=>{var m=u(60785),c=u(83476);const{getItem:l,setItem:s,removeItem:n}=(0,m.Z)("localStorage",{throwQuotaErrorsOnSet:!0});var t=(e=>(e.Branch="branch",e.Tag="tag",e))(t||{});const r=a(class{constructor(e,i,f,b,E){this.knownItems=[],this.currentSearchResult=[],this.exactMatchFound=!1,this.isLoading=!0,this.fetchInProgress=!1,this.fetchFailed=!1,this.refType=e,this.selector=i,this.refEndpoint=f,this.cacheKey=b,this.nameWithOwner=E}render(){this.selector.render()}async fetchData(){try{if(!this.isLoading||this.fetchInProgress)return;if(!this.bootstrapFromLocalStorage()){this.fetchInProgress=!0,this.fetchFailed=!1;const e=await fetch(`${this.refEndpoint}?type=${this.refType}`,{headers:{Accept:"application/json"}});await this.processResponse(e)}this.isLoading=!1,this.fetchInProgress=!1,this.render()}catch{this.fetchInProgress=!1,this.fetchFailed=!0}}async processResponse(e){if(this.emitStats(e),!e.ok){this.fetchFailed=!0;return}const i=e.clone(),f=await e.json();this.knownItems=f.refs,this.cacheKey=f.cacheKey,this.flushToLocalStorage(await i.text())}emitStats(e){if(!e.ok){(0,c.b)({incrementKey:"REF_SELECTOR_BOOT_FAILED"},!0);return}switch(e.status){case 200:{(0,c.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_UNCACHED_HTTP"});break}case 304:{(0,c.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_HTTP_CACHE"});break}default:(0,c.b)({incrementKey:"REF_SELECTOR_UNEXPECTED_RESPONSE"})}}search(e){if(e===""){this.currentSearchResult=this.knownItems;return}const i=[],f=[];this.exactMatchFound=!1;let b;for(const E of this.knownItems)if(b=E.indexOf(e),!(b<0)){if(b===0){e===E?(f.unshift(E),this.exactMatchFound=!0):f.push(E);continue}i.push(E)}this.currentSearchResult=[...f,...i]}bootstrapFromLocalStorage(){const e=l(this.localStorageKey);if(!e)return!1;const i=JSON.parse(e);return i.cacheKey!==this.cacheKey||!("refs"in i)?(n(this.localStorageKey),!1):(this.knownItems=i.refs,this.isLoading=!1,(0,c.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_LOCALSTORAGE"}),!0)}async flushToLocalStorage(e){try{s(this.localStorageKey,e)}catch(i){if(i.message.toLowerCase().includes("quota")){this.clearSiblingLocalStorage(),(0,c.b)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_OVERFLOWED"});try{s(this.localStorageKey,e)}catch(f){f.message.toLowerCase().includes("quota")&&(0,c.b)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_GAVE_UP"})}}else throw i}}clearSiblingLocalStorage(){for(const e of Object.keys(localStorage))e.startsWith(r.LocalStoragePrefix)&&n(e)}get localStorageKey(){return`${r.LocalStoragePrefix}:${this.nameWithOwner}:${this.refType}`}},"_SearchIndex");let p=r;p.LocalStoragePrefix="ref-selector";var h=u(69567),w=u(90420),g=u(17945),y=Object.defineProperty,o=Object.getOwnPropertyDescriptor,d=a((e,i,f,b)=>{for(var E=b>1?void 0:b?o(i,f):i,C=e.length-1,v;C>=0;C--)(v=e[C])&&(E=(b?v(i,f,E):v(E))||E);return b&&E&&y(i,f,E),E},"__decorateClass");let _=a(class extends HTMLElement{constructor(){super(...arguments);this.isCurrentVisible=!1,this.currentSelectionIndex=null,this.handleWindowResize=()=>{if(!this.virtualizedList)return;const e=this.isMobileViewport,i=this.windowHeight;this.updateViewportSize();const f=e!==this.isMobileViewport,b=i!==this.windowHeight;if(f){this.virtualizedList.destroy(),this.setupVirtualizedList();return}!this.isMobileViewport||!b||(this.listContainer.style.maxHeight=`${this.listHeight}px`,this.virtualizedList.resize(this.listHeight))},this.windowResized=()=>{this.resizeAnimationRequest&&cancelAnimationFrame(this.resizeAnimationRequest),this.resizeAnimationRequest=requestAnimationFrame(this.handleWindowResize)}}connectedCallback(){window.addEventListener("resize",this.windowResized),this.refType=this.getRequiredAttr("type")==="branch"?t.Branch:t.Tag;const e=this.getAttribute("current-committish");this.currentCommittish=e?atob(e):null,this.input=this.hasAttribute("initial-filter")&&this.currentCommittish||"",this.defaultBranch=atob(this.getRequiredAttr("default-branch")),this.nameWithOwner=atob(this.getRequiredAttr("name-with-owner")),this.canCreate=this.hasAttribute("can-create"),this.prefetchOnMouseover=this.hasAttribute("prefetch-on-mouseover");const i=this.getRequiredAttr("query-endpoint"),f=this.getRequiredAttr("cache-key");this.index=new p(this.refType,this,i,f,this.nameWithOwner),this.updateViewportSize(),this.setupFetchListeners()}disconnectedCallback(){this.resizeAnimationRequest&&cancelAnimationFrame(this.resizeAnimationRequest),window.removeEventListener("resize",this.windowResized)}updateViewportSize(){this.isMobileViewport=window.innerWidth<544,this.windowHeight=window.innerHeight}inputEntered(e){this.input=e.detail,this.render()}tabSelected(){this.index.fetchData()}renderTemplate(e,i){return new h.R(e,i,h.XK)}renderRow(e){const i=this.index.currentSearchResult[e];if(!i&&e>=this.listLength)return document.createElement("span");if(this.index.fetchFailed)return this.renderTemplate(this.fetchFailedTemplate,{index:e,refName:this.input});if(!i){const v=this.input===this.currentCommittish;return this.isCurrentVisible||(this.isCurrentVisible=v),this.renderTemplate(this.noMatchTemplate,{index:e,isCurrent:v,refName:this.input})}const f=this.input.length>0,b=f?"is-filtering":"",E=i===this.currentCommittish;this.isCurrentVisible||(this.isCurrentVisible=E);const C=this.renderTemplate(this.itemTemplate,{refName:i,index:e,isFilteringClass:b,urlEncodedRefName:this.urlEncodeRef(i),isCurrent:E,isNotDefault:i!==this.defaultBranch});if(f){const v=C.querySelector("span");v.textContent="";const x=i.split(this.input),R=x.length-1;for(let S=0;S<x.length;S++){const A=x[S];if(v.appendChild(document.createTextNode(A)),S<R){const I=document.createElement("b");I.textContent=this.input,v.appendChild(I)}}}return C}urlEncodeRef(e){return encodeURIComponent(e).replaceAll("%2F","/").replaceAll("%3A",":").replaceAll("%2B","+")}render(){if(this.currentSelectionIndex=null,!this.index.isLoading){if(!this.virtualizedList){this.index.search(this.input),this.setupVirtualizedList();return}this.listContainer.scrollTop=0,this.index.search(this.input),this.virtualizedList.setRowCount(this.listLength)}}get listHeight(){return this.isMobileViewport?this.windowHeight*.3:330}get listLength(){const e=this.index.currentSearchResult.length;return this.showCreateRow?e+1:e||1}get showCreateRow(){return!this.index.fetchFailed&&!this.index.exactMatchFound&&this.input!==""&&this.canCreate}getRequiredAttr(e,i=this){const f=i.getAttribute(e);if(!f)throw new Error(`Missing attribute for ${i}: ${e}`);return f}setupFetchListeners(){const e=this.closest("details");let i=!1;const f=a(()=>{i||(this.index.fetchData(),i=!0)},"fetch");if(!e||e.open){f();return}this.prefetchOnMouseover&&e.addEventListener("mouseover",f,{once:!0}),this.addEventListener("keydown",this.keydown),this.addEventListener("change",this.updateCurrent);const b=e.querySelector("input[data-ref-filter]");b&&(b.addEventListener("input",()=>{this.input=b.value,this.render()}),b.addEventListener("keydown",E=>{if(E.key==="ArrowDown"||E.key==="Tab")E.preventDefault(),E.stopPropagation(),this.focusFirstListMember();else if(E.key==="Enter"){let C=this.index.currentSearchResult.indexOf(this.input);if(C===-1)if(this.showCreateRow)C=this.listLength-1;else return;e.querySelector(`[data-index="${C}"]`).click(),E.preventDefault()}}))}focusFirstListMember(){!this.virtualizedList||(this.currentSelectionIndex=0,this.focusItemAtIndex(this.currentSelectionIndex))}updateCurrent(e){e.target instanceof HTMLInputElement&&e.target.checked&&e.target.value&&(this.currentCommittish=e.target.value)}keydown(e){if(this.currentSelectionIndex!==null){if(e.key==="Enter"){const i=document.activeElement;if(!i)return;i.click(),e.preventDefault();return}if(!(e.key==="Tab"&&e.shiftKey)&&e.key!=="Escape")switch(e.preventDefault(),e.stopPropagation(),e.key){case"ArrowUp":{this.currentSelectionIndex--,this.currentSelectionIndex<0&&(this.currentSelectionIndex=this.listLength-1),this.focusItemAtIndex(this.currentSelectionIndex);break}case"Home":{this.currentSelectionIndex=0,this.focusItemAtIndex(this.currentSelectionIndex);break}case"End":{this.currentSelectionIndex=this.listLength-1,this.focusItemAtIndex(this.currentSelectionIndex);break}case"Tab":case"ArrowDown":{this.currentSelectionIndex++,this.currentSelectionIndex>this.listLength-1&&(this.currentSelectionIndex=0),this.focusItemAtIndex(this.currentSelectionIndex);break}}}}focusItemAtIndex(e){this.virtualizedList.scrollToIndex(e,"center"),setTimeout(()=>{const i=this.listContainer.querySelector(`[data-index="${e}"]`);i&&i.focus()},20)}setupVirtualizedList(){this.listContainer.innerHTML="",this.listContainer.style.maxHeight=`${this.listHeight}px`,this.virtualizedList=new g.Z(this.listContainer,{height:this.listHeight,rowCount:this.listLength,renderRow:this.renderRow.bind(this),rowHeight:e=>{const i=this.isMobileViewport?54:33;return this.showCreateRow&&e===this.listLength-1?51:i},onRowsRendered:()=>{var e;this.hiddenCurrentElement&&(this.listContainer.removeChild(this.hiddenCurrentElement),delete this.hiddenCurrentElement),this.isCurrentVisible?this.isCurrentVisible=!1:this.hiddenCurrentItemTemplate&&(this.hiddenCurrentElement=document.createElement("div"),(e=this.hiddenCurrentElement)==null||e.appendChild(this.renderTemplate(this.hiddenCurrentItemTemplate,{refName:this.currentCommittish})),this.listContainer.appendChild(this.hiddenCurrentElement))},initialIndex:0,overscanCount:6}),this.virtualizedList.resize.bind(this.virtualizedList)}},"RefSelectorElement");d([w.fA],_.prototype,"listContainer",2),d([w.fA],_.prototype,"itemTemplate",2),d([w.fA],_.prototype,"noMatchTemplate",2),d([w.fA],_.prototype,"fetchFailedTemplate",2),d([w.fA],_.prototype,"hiddenCurrentItemTemplate",2),_=d([w.Ih],_)},90137:(T,L,u)=>{u.d(L,{j:()=>m,u:()=>c});function m(l){const s=l.closest("form");if(!(s instanceof HTMLFormElement))return;let n=c(s);if(l.name){const t=l.matches("input[type=submit]")?"Submit":"",r=l.value||t;n||(n=document.createElement("input"),n.type="hidden",n.classList.add("is-submit-button-value"),s.prepend(n)),n.name=l.name,n.value=r}else n&&n.remove()}a(m,"persistSubmitButtonValue");function c(l){const s=l.querySelector("input.is-submit-button-value");return s instanceof HTMLInputElement?s:null}a(c,"findPersistedSubmitButtonValue")},63355:(T,L,u)=>{var m=u(64463);const c=a(()=>{const l=document.getElementById("spoof-warning");if(!l)return;const s=document.querySelector(".commit-title");s&&s.classList.add("pb-1"),l.hidden=!1,l.removeAttribute("aria-hidden")},"showSpoofCommitBanner");(0,m.N7)("#js-spoofed-commit-warning-trigger",{add:c})},86404:(T,L,u)=>{u.d(L,{RB:()=>c,qC:()=>l,w0:()=>m});class m{constructor(n){this.closed=!1,this.unsubscribe=()=>{n(),this.closed=!0}}}a(m,"Subscription");function c(s,n,t,r={capture:!1}){return s.addEventListener(n,t,r),new m(()=>{s.removeEventListener(n,t,r)})}a(c,"fromEvent");function l(...s){return new m(()=>{for(const n of s)n.unsubscribe()})}a(l,"compose")}}]);})();

//# sourceMappingURL=6791-6bfe519943e4.js.map