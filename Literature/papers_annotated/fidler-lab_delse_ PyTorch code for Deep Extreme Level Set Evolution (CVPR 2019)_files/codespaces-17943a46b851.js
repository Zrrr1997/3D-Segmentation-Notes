"use strict";(()=>{var re=Object.defineProperty;var i=(I,_)=>re(I,"name",{value:_,configurable:!0});(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[7807],{41830:(I,_,h)=>{var m=h(64463),p=h(59753),f=h(65935),u=h(82036);(0,p.on)("remote-input-error","#js-codespaces-repository-select",()=>{const e=document.querySelector("#js-codespaces-unable-load-repositories-warning");e.hidden=!1});function l(e){const n=new URL(document.location.href,window.location.origin),s=new URLSearchParams(n.search),o=["vscs_target"];for(const[a,C]of e.entries()){if(o.includes(a)||!C){s.delete(a);continue}s.set(a,C)}window.history.replaceState({},"",`?${s.toString()}`)}i(l,"updateNewCodespaceUrl"),(0,f.AC)(".js-new-codespace-form",async function(e,n){const s=e.closest("[data-replace-remote-form-target]"),o=s.querySelector(".js-new-codespace-submit-button");o instanceof HTMLInputElement&&(o.disabled=!0),e.classList.remove("is-error"),e.classList.add("is-loading");try{const a=await n.html();if(a.status!==200&&r(),s.replaceWith(a.html),s.getAttribute("data-allow-update-url")==="true"){const C=new FormData(document.querySelector("form.js-new-codespace-form"));l(C)}}catch{r()}});function r(){const e=new URL(document.location.href,window.location.origin),n=new URLSearchParams(e.search);n.set("response_error","true"),window.location.replace(`${window.location.pathname}?${n.toString()}`)}i(r,"resetNewCodespacePageWithResponseError");let d=null;function T(e){d=e,e!==null&&document.querySelector(".js-codespace-loading-steps").setAttribute("data-current-state",d)}i(T,"advanceLoadingState"),(0,m.N7)(".js-codespace-loading-steps",{constructor:HTMLElement,add:e=>{const n=e.getAttribute("data-current-state");n&&T(n)}}),(0,m.N7)(".js-codespace-advance-state",{constructor:HTMLElement,add:e=>{const n=e.getAttribute("data-state");n&&T(n)}});let g=null;function b(e){(0,f.AC)(".js-fetch-cascade-token",async function(n,s){try{g=(await s.json()).json.token}catch{}}),(0,u.Bt)(e)}i(b,"fetchCascadeToken");function S(e,n,s){if(document.querySelector(e)){const a=Date.now(),A=setInterval(i(()=>{const se=Date.now()-a;if(g||se>=s){clearInterval(A),n(g||void 0);return}},"checkToken"),50)}}i(S,"waitForCascadeTokenWithTimeout"),(0,m.N7)(".js-auto-submit-form",{constructor:HTMLFormElement,initialize:u.Bt}),(0,m.N7)(".js-workbench-form-container",{constructor:HTMLElement,add:e=>{const n=e.querySelector(".js-cascade-token");P(e,n)}});function P(e,n){if(n.value!==""){const s=e.querySelector("form");(0,u.Bt)(s)}else{const s=document.querySelector(".js-fetch-cascade-token");b(s),S(".js-workbench-form-container",w,1e4)}}i(P,"resolveCascadeToken");function w(e){const n=document.querySelector(".js-workbench-form-container form");n&&e?(y(n,e),L(n,e),(0,u.Bt)(n)):T("failed")}i(w,"insertCodespaceTokenIntoShowAuthForm");function y(e,n){const s=e.querySelector(".js-cascade-token");s&&s.setAttribute("value",n)}i(y,"insertCodespaceTokenIntoCascadeField");function L(e,n){const s=e.querySelector(".js-partner-info");if(s){let o=s.getAttribute("value");o&&(o=o.replace("%CASCADE_TOKEN_PLACEHOLDER%",n),s.setAttribute("value",o))}}i(L,"insertCodespaceTokenIntoPartnerInfo");var t=h(90420),c=h(69567),E=h(51374),x=h(10900);(0,p.on)("submit",".js-toggle-hidden-codespace-form",function(e){const n=e.currentTarget;v(n)});function v(e){const n=e.querySelectorAll(".js-toggle-hidden");for(const o of n)o.hidden=!o.hidden;const s=e.querySelectorAll(".js-toggle-disabled");for(const o of s)o.getAttribute("aria-disabled")?o.removeAttribute("aria-disabled"):o.setAttribute("aria-disabled","true")}i(v,"toggleFormSubmissionInFlight");function D(e){return e.closest("[data-replace-remote-form-target]")}i(D,"getFormTarget");async function O(){const e=document.querySelector(".js-codespaces-details-container");e&&(e.open=!1);const n=document.querySelector("new-codespace");if(n&&!n.getAttribute("data-no-submit-on-create"))try{const s=await fetch("/codespaces/new");if(s&&s.ok){const o=(0,x.r)(document,await s.text());n.replaceWith(o)}}catch{}}i(O,"createFormSubmitted"),(0,p.on)("submit",".js-create-codespaces-form-command",function(e){const n=e.currentTarget;n.classList.contains("js-open-in-vscode-form")||(O(),v(n))}),(0,p.on)("submit",".js-open-in-web-form",async function(e){const n=e.currentTarget;e.preventDefault(),n.submit()}),(0,p.on)("submit","form.js-codespaces-delete-form",async function(e){e.preventDefault();const n=e.currentTarget;try{const s=await fetch(n.action,{method:n.method,body:new FormData(n),headers:{Accept:"text/fragment+html","X-Requested-With":"XMLHttpRequest"}});if(s.ok){const o=(0,x.r)(document,await s.text());D(n).replaceWith(o)}else if(s.status===401)n.submit();else throw new Error(`Unexpected response: ${s.statusText}`)}finally{v(n)}}),(0,p.on)("submit","form.js-open-in-vscode-form",async function(e){e.preventDefault();const n=e.currentTarget;await V(n)});async function j(e,n){const s=document.querySelector(`#${e}`),o=await(0,E.W)({content:s.content.cloneNode(!0),dialogClass:"project-dialog"});return n&&n.setAttribute("aria-expanded","true"),o.addEventListener("dialog:remove",function(){n&&v(n)},{once:!0}),o}i(j,"openDialog");async function V(e){const n=await fetch(e.action,{method:e.method,body:new FormData(e),headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(n.ok){const s=await n.json();s.codespace_url?(window.location.href=s.codespace_url,v(e),O(),H()):(e.closest("get-repo")||e.closest("new-codespace")?(e.setAttribute("data-src",s.loading_url),e.dispatchEvent(new CustomEvent("pollvscode"))):e.closest("create-button")&&(e.setAttribute("data-src",s.loading_url),e.dispatchEvent(new CustomEvent("prpollvscode"))),v(e))}else if(n.status===422){const s=await n.json();if(s.error_type==="concurrency_limit_error")await j("concurrency-error",e);else{const o=document.querySelector("template.js-flash-template"),a=s.error;o.after(new c.R(o,{className:"flash-error",message:a})),v(e)}}}i(V,"createCodespaceIntoVscode");async function H(){const e=document.querySelector(".js-codespaces-completable"),n=e&&e.getAttribute("data-src");if(!n)return;const s=await fetch(n,{method:"GET",headers:{Accept:"text/fragment+html","X-Requested-With":"XMLHttpRequest"}});if(s.ok){const o=(0,x.r)(document,await s.text());e.replaceWith(o)}else throw new Error(`Unexpected response: ${s.statusText}`)}i(H,"renderAllDone");var K=Object.defineProperty,B=Object.getOwnPropertyDescriptor,$=i((e,n,s,o)=>{for(var a=o>1?void 0:o?B(n,s):n,C=e.length-1,A;C>=0;C--)(A=e[C])&&(a=(o?A(n,s,a):A(a))||a);return o&&a&&K(n,s,a),a},"__decorateClass");let U=i(class extends HTMLElement{async connectedCallback(){j("concurrency-error")}},"ConcurrencyLimitElement");U=$([t.Ih],U);var X=Object.defineProperty,G=Object.getOwnPropertyDescriptor,k=i((e,n,s,o)=>{for(var a=o>1?void 0:o?G(n,s):n,C=e.length-1,A;C>=0;C--)(A=e[C])&&(a=(o?A(n,s,a):A(a))||a);return o&&a&&X(n,s,a),a},"new_codespace_element_decorateClass");let F=i(class extends HTMLElement{async connectedCallback(){const e=new URL(document.location.href,window.location.origin),n=new URLSearchParams(e.search);n.has("response_error")&&(n.delete("response_error"),window.history.replaceState({},"",`?${n.toString()}`))}toggleLoadingVscode(){const e=this.loadingVscode.hidden,n=this.children;for(let s=0;s<n.length;s++)n[s].hidden=e;this.loadingVscode.hidden=!e}machineTypeSelected(e){const s=e.currentTarget.getAttribute("data-sku-name");this.skuNameInput&&s&&(this.skuNameInput.value=s),this.advancedOptionsForm&&(this.advancedOptionsForm.requestSubmit?this.advancedOptionsForm.requestSubmit():this.advancedOptionsForm.submit())}pollForVscode(e){this.toggleLoadingVscode();const n=e.currentTarget.getAttribute("data-src");n&&this.vscodePoller.setAttribute("src",n)}vscsTargetUrlUpdated(e){const n=e.currentTarget;this.vscsTargetUrl.value=n.value}},"NewCodespaceElement");k([t.fA],F.prototype,"vscsTargetUrl",2),k([t.fA],F.prototype,"loadingVscode",2),k([t.fA],F.prototype,"vscodePoller",2),k([t.fA],F.prototype,"advancedOptionsForm",2),k([t.fA],F.prototype,"skuNameInput",2),F=k([t.Ih],F);var Z=Object.defineProperty,Q=Object.getOwnPropertyDescriptor,W=i((e,n,s,o)=>{for(var a=o>1?void 0:o?Q(n,s):n,C=e.length-1,A;C>=0;C--)(A=e[C])&&(a=(o?A(n,s,a):A(a))||a);return o&&a&&Z(n,s,a),a},"export_branch_element_decorateClass");let q=i(class extends HTMLElement{constructor(){super(...arguments);this.abortPoll=null}connectedCallback(){this.abortPoll=new AbortController,this.loadingIndicator.hidden||this.startPoll()}disconnectedCallback(){var e;(e=this.abortPoll)==null||e.abort()}async exportBranch(e){e.preventDefault(),this.form.hidden=!0,this.loadingIndicator.hidden=!1,(await fetch(this.form.action,{method:this.form.method,body:new FormData(this.form),headers:{Accept:"text/fragment+html","X-Requested-With":"XMLHttpRequest"}})).ok?this.startPoll():(this.form.hidden=!1,this.loadingIndicator.hidden=!0)}async startPoll(){const e=this.getAttribute("data-exported-codespace-url")||"",n=await this.poll(e);if(n)if(n.ok)this.loadingIndicator.hidden=!0,this.viewBranchLink.hidden=!1;else{const s=this.getAttribute("data-export-error-redirect-url")||"";window.location.href=s}}async poll(e,n=1e3){var s,o;if((s=this.abortPoll)==null?void 0:s.signal.aborted)return;const a=await fetch(e,{signal:(o=this.abortPoll)==null?void 0:o.signal});return a.status===202?(await new Promise(C=>setTimeout(C,n)),this.poll(e,n*1.5)):a}},"ExportBranchElement");W([t.fA],q.prototype,"form",2),W([t.fA],q.prototype,"loadingIndicator",2),W([t.fA],q.prototype,"viewBranchLink",2),q=W([t.Ih],q);var J=h(52660),Y=Object.defineProperty,ee=Object.getOwnPropertyDescriptor,M=i((e,n,s,o)=>{for(var a=o>1?void 0:o?ee(n,s):n,C=e.length-1,A;C>=0;C--)(A=e[C])&&(a=(o?A(n,s,a):A(a))||a);return o&&a&&Y(n,s,a),a},"options_popover_element_decorateClass");let R=i(class extends HTMLElement{reset(e){for(e.preventDefault(),this.dropdownDetails.hidden=!1,this.modalDetails.hidden=!0,this.exportDetails.hidden=!0,this.skuForm.hidden=!1;this.resultMessage.firstChild;)this.resultMessage.removeChild(this.resultMessage.firstChild);this.resultMessage.hidden=!0,this.errorMessage.hidden=!0}showSettingsModal(){this.dropdownDetails.hidden=!0,this.modalDetails.open=!0,this.modalDetails.hidden=!1}showExportModal(){this.dropdownDetails.hidden=!0,this.exportDetails.open=!0,this.exportDetails.hidden=!1,this.insertBranchExportComponent()}async insertBranchExportComponent(){const e=this.querySelector("[data-branch-export-url]");if(!e)return;const n=e.getAttribute("data-branch-export-url");if(!n)return;const s=await(0,J.a)(document,n);!s||(e.innerHTML="",e.appendChild(s))}},"OptionsPopoverElement");M([t.fA],R.prototype,"dropdownDetails",2),M([t.fA],R.prototype,"modalDetails",2),M([t.fA],R.prototype,"settingsModal",2),M([t.fA],R.prototype,"skuForm",2),M([t.fA],R.prototype,"resultMessage",2),M([t.fA],R.prototype,"errorMessage",2),M([t.fA],R.prototype,"exportDetails",2),R=M([t.Ih],R);var te=Object.defineProperty,ne=Object.getOwnPropertyDescriptor,z=i((e,n,s,o)=>{for(var a=o>1?void 0:o?ne(n,s):n,C=e.length-1,A;C>=0;C--)(A=e[C])&&(a=(o?A(n,s,a):A(a))||a);return o&&a&&te(n,s,a),a},"vscode_forwarder_element_decorateClass");let N=i(class extends HTMLElement{async connectedCallback(){this.closeDetailsPopover();const e=this.getAttribute("data-codespace-url");e&&(window.location.href=e)}closeDetailsPopover(){const e=document.querySelector(".js-codespaces-details-container");e&&(e.open=!1)}},"VscodeForwarderElement");z([t.fA],N.prototype,"vscodeLink",2),N=z([t.Ih],N);var ie=h(9115),oe=h(68906)},52134:(I,_,h)=>{h.d(_,{H:()=>f,v:()=>p});var m=h(59753);function p(){const u=document.getElementById("ajax-error-message");u&&(u.hidden=!1)}i(p,"showGlobalError");function f(){const u=document.getElementById("ajax-error-message");u&&(u.hidden=!0)}i(f,"hideGlobalError"),(0,m.on)("deprecatedAjaxError","[data-remote]",function(u){const l=u.detail,{error:r,text:d}=l;u.currentTarget===u.target&&(r==="abort"||r==="canceled"||(/<html/.test(d)?(p(),u.stopImmediatePropagation()):setTimeout(function(){u.defaultPrevented||p()},0)))}),(0,m.on)("deprecatedAjaxSend","[data-remote]",function(){f()}),(0,m.on)("click",".js-ajax-error-dismiss",function(){f()})},51374:(I,_,h)=>{h.d(_,{W:()=>p});var m=h(59753);async function p(f){const l=document.querySelector("#site-details-dialog").content.cloneNode(!0),r=l.querySelector("details"),d=r.querySelector("details-dialog"),T=r.querySelector(".js-details-dialog-spinner");f.detailsClass&&r.classList.add(...f.detailsClass.split(" ")),f.dialogClass&&d.classList.add(...f.dialogClass.split(" ")),f.label?d.setAttribute("aria-label",f.label):f.labelledBy&&d.setAttribute("aria-labelledby",f.labelledBy),document.body.append(l);const g=await f.content;return T.remove(),d.prepend(g),r.addEventListener("toggle",()=>{r.hasAttribute("open")||((0,m.f)(d,"dialog:remove"),r.remove())}),d}i(p,"dialog")},34782:(I,_,h)=>{h.d(_,{C:()=>p,x:()=>m});const m=function(){return document.readyState==="interactive"||document.readyState==="complete"?Promise.resolve():new Promise(f=>{document.addEventListener("DOMContentLoaded",()=>{f()})})}(),p=function(){return document.readyState==="complete"?Promise.resolve():new Promise(f=>{window.addEventListener("load",f)})}()},52660:(I,_,h)=>{h.d(_,{D:()=>u,a:()=>f});var m=h(2699),p=h(10900);async function f(l,r,d){const T=new Request(r,d);T.headers.append("X-Requested-With","XMLHttpRequest");const g=await self.fetch(T);if(g.status<200||g.status>=300)throw new Error(`HTTP ${g.status}${g.statusText||""}`);return(0,m.t)((0,m.P)(l),g),(0,p.r)(l,await g.text())}i(f,"fetchSafeDocumentFragment");function u(l,r,d=1e3){return i(async function T(g){const b=new Request(l,r);b.headers.append("X-Requested-With","XMLHttpRequest");const S=await self.fetch(b);if(S.status<200||S.status>=300)throw new Error(`HTTP ${S.status}${S.statusText||""}`);if(S.status===200)return S;if(S.status===202)return await new Promise(P=>setTimeout(P,g)),T(g*1.5);throw new Error(`Unexpected ${S.status} response status from poll endpoint`)},"poll")(d)}i(u,"fetchPoll")},82036:(I,_,h)=>{h.d(_,{Bt:()=>l,DN:()=>T,KL:()=>S,Se:()=>d,qC:()=>P,sw:()=>g});var m=h(59753),p=h(90137),f=h(52134);(0,m.on)("click",".js-remote-submit-button",async function(w){const L=w.currentTarget.form;w.preventDefault();let t;try{t=await fetch(L.action,{method:L.method,body:new FormData(L),headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}})}catch{}t&&!t.ok&&(0,f.v)()});function u(w,y,L){return w.dispatchEvent(new CustomEvent(y,{bubbles:!0,cancelable:L}))}i(u,"fire");function l(w,y){y&&(r(w,y),(0,p.j)(y)),u(w,"submit",!0)&&w.submit()}i(l,"requestSubmit");function r(w,y){if(!(w instanceof HTMLFormElement))throw new TypeError("The specified element is not of type HTMLFormElement.");if(!(y instanceof HTMLElement))throw new TypeError("The specified element is not of type HTMLElement.");if(y.type!=="submit")throw new TypeError("The specified element is not a submit button.");if(!w||w!==y.form)throw new Error("The specified element is not owned by the form element.")}i(r,"checkButtonValidity");function d(w,y){if(typeof y=="boolean")if(w instanceof HTMLInputElement)w.checked=y;else throw new TypeError("only checkboxes can be set to boolean value");else{if(w.type==="checkbox")throw new TypeError("checkbox can't be set to string value");w.value=y}u(w,"change",!1)}i(d,"changeValue");function T(w,y){for(const L in y){const t=y[L],c=w.elements.namedItem(L);(c instanceof HTMLInputElement||c instanceof HTMLTextAreaElement)&&(c.value=t)}}i(T,"fillFormValues");function g(w){if(!(w instanceof HTMLElement))return!1;const y=w.nodeName.toLowerCase(),L=(w.getAttribute("type")||"").toLowerCase();return y==="select"||y==="textarea"||y==="input"&&L!=="submit"&&L!=="reset"||w.isContentEditable}i(g,"isFormField");function b(w){return new URLSearchParams(w)}i(b,"searchParamsFromFormData");function S(w,y){const L=new URLSearchParams(w.search),t=b(y);for(const[c,E]of t)L.append(c,E);return L.toString()}i(S,"combineGetFormSearchParams");function P(w){return b(new FormData(w)).toString()}i(P,"serialize")},2699:(I,_,h)=>{h.d(_,{P:()=>m,t:()=>f});function m(u){const l=[...u.querySelectorAll("meta[name=html-safe-nonce]")].map(r=>r.content);if(l.length<1)throw new Error("could not find html-safe-nonce on document");return l}i(m,"getDocumentHtmlSafeNonces");class p extends Error{constructor(l,r){super(`${l} for HTTP ${r.status}`);this.response=r}}i(p,"ResponseError");function f(u,l,r=!1){const d=l.headers.get("content-type")||"";if(!r&&!d.startsWith("text/html"))throw new p(`expected response with text/html, but was ${d}`,l);if(r&&!(d.startsWith("text/html")||d.startsWith("application/json")))throw new p(`expected response with text/html or application/json, but was ${d}`,l);const T=l.headers.get("x-html-safe");if(T){if(!u.includes(T))throw new p("response X-HTML-Safe nonce did not match",l)}else throw new p("missing X-HTML-Safe nonce",l)}i(f,"verifyResponseHtmlSafeNonce")},9115:(I,_,h)=>{var m=h(90420),p=Object.defineProperty,f=Object.getOwnPropertyDescriptor,u=i((r,d,T,g)=>{for(var b=g>1?void 0:g?f(d,T):d,S=r.length-1,P;S>=0;S--)(P=r[S])&&(b=(g?P(d,T,b):P(b))||b);return g&&b&&p(d,T,b),b},"__decorateClass");let l=i(class extends HTMLElement{connectedCallback(){this.control&&(this.storedInput=Array(this.control.children.length).fill("")),this.addEventListener("input",this.relayInput.bind(this)),this.addEventListener("keydown",this.relayKeydown.bind(this));const r=this.closest("details");r&&r.addEventListener("toggle",()=>{r.open&&this.source.focus()})}relayKeydown(r){if((this.isControlTab(r.target)||r.target===this.source)&&(r.key==="ArrowDown"||r.key==="Tab"))r.preventDefault(),r.stopPropagation(),this.routeCustomEvent(new CustomEvent("focus-list"));else if(r.key==="Escape"){const d=this.closest("details");d&&d.removeAttribute("open")}}isControlTab(r){return!r||!this.control?!1:Array.from(this.control.children).includes(r)}relayInput(r){if(!r.target)return;const T=r.target.value;this.routeCustomEvent(new CustomEvent("input-entered",{detail:T}))}routeCustomEvent(r){this.sinks[this.selectedIndex].dispatchEvent(r)}get selectedIndex(){if(!this.control)return 0;const r=this.control.querySelector('[aria-selected="true"]');return r?Array.from(this.control.children).indexOf(r):0}storeInput(){this.storedInput[this.selectedIndex]=this.source.value}updateInput(r){this.source.value=this.storedInput[this.selectedIndex];const d=r.detail.relatedTarget.getAttribute("data-filter-placeholder");this.source.placeholder=d,this.source.setAttribute("aria-label",d),this.notifySelected()}notifySelected(){const r=this.sinks[this.selectedIndex],d=new CustomEvent("tab-selected");r.dispatchEvent(d)}},"InputDemuxElement");u([m.fA],l.prototype,"source",2),u([m.GO],l.prototype,"sinks",2),u([m.fA],l.prototype,"control",2),l=u([m.Ih],l)},10900:(I,_,h)=>{h.d(_,{r:()=>m});function m(p,f){const u=p.createElement("template");return u.innerHTML=f,p.importNode(u.content,!0)}i(m,"parseHTML")},43452:(I,_,h)=>{h.d(_,{Z:()=>m});function m(p){var f,u;const l=(u=(f=p.head)==null?void 0:f.querySelector('meta[name="expected-hostname"]'))==null?void 0:u.content;if(!l)return!1;const r=l.replace(/\.$/,"").split(".").slice(-2).join("."),d=p.location.hostname.replace(/\.$/,"").split(".").slice(-2).join(".");return r!==d}i(m,"detectProxySite")},68906:(I,_,h)=>{var m=h(60785),p=h(83476);const{getItem:f,setItem:u,removeItem:l}=(0,m.Z)("localStorage",{throwQuotaErrorsOnSet:!0});var r=(t=>(t.Branch="branch",t.Tag="tag",t))(r||{});const d=i(class{constructor(t,c,E,x,v){this.knownItems=[],this.currentSearchResult=[],this.exactMatchFound=!1,this.isLoading=!0,this.fetchInProgress=!1,this.fetchFailed=!1,this.refType=t,this.selector=c,this.refEndpoint=E,this.cacheKey=x,this.nameWithOwner=v}render(){this.selector.render()}async fetchData(){try{if(!this.isLoading||this.fetchInProgress)return;if(!this.bootstrapFromLocalStorage()){this.fetchInProgress=!0,this.fetchFailed=!1;const t=await fetch(`${this.refEndpoint}?type=${this.refType}`,{headers:{Accept:"application/json"}});await this.processResponse(t)}this.isLoading=!1,this.fetchInProgress=!1,this.render()}catch{this.fetchInProgress=!1,this.fetchFailed=!0}}async processResponse(t){if(this.emitStats(t),!t.ok){this.fetchFailed=!0;return}const c=t.clone(),E=await t.json();this.knownItems=E.refs,this.cacheKey=E.cacheKey,this.flushToLocalStorage(await c.text())}emitStats(t){if(!t.ok){(0,p.b)({incrementKey:"REF_SELECTOR_BOOT_FAILED"},!0);return}switch(t.status){case 200:{(0,p.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_UNCACHED_HTTP"});break}case 304:{(0,p.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_HTTP_CACHE"});break}default:(0,p.b)({incrementKey:"REF_SELECTOR_UNEXPECTED_RESPONSE"})}}search(t){if(t===""){this.currentSearchResult=this.knownItems;return}const c=[],E=[];this.exactMatchFound=!1;let x;for(const v of this.knownItems)if(x=v.indexOf(t),!(x<0)){if(x===0){t===v?(E.unshift(v),this.exactMatchFound=!0):E.push(v);continue}c.push(v)}this.currentSearchResult=[...E,...c]}bootstrapFromLocalStorage(){const t=f(this.localStorageKey);if(!t)return!1;const c=JSON.parse(t);return c.cacheKey!==this.cacheKey||!("refs"in c)?(l(this.localStorageKey),!1):(this.knownItems=c.refs,this.isLoading=!1,(0,p.b)({incrementKey:"REF_SELECTOR_BOOTED_FROM_LOCALSTORAGE"}),!0)}async flushToLocalStorage(t){try{u(this.localStorageKey,t)}catch(c){if(c.message.toLowerCase().includes("quota")){this.clearSiblingLocalStorage(),(0,p.b)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_OVERFLOWED"});try{u(this.localStorageKey,t)}catch(E){E.message.toLowerCase().includes("quota")&&(0,p.b)({incrementKey:"REF_SELECTOR_LOCALSTORAGE_GAVE_UP"})}}else throw c}}clearSiblingLocalStorage(){for(const t of Object.keys(localStorage))t.startsWith(d.LocalStoragePrefix)&&l(t)}get localStorageKey(){return`${d.LocalStoragePrefix}:${this.nameWithOwner}:${this.refType}`}},"_SearchIndex");let T=d;T.LocalStoragePrefix="ref-selector";var g=h(69567),b=h(90420),S=h(17945),P=Object.defineProperty,w=Object.getOwnPropertyDescriptor,y=i((t,c,E,x)=>{for(var v=x>1?void 0:x?w(c,E):c,D=t.length-1,O;D>=0;D--)(O=t[D])&&(v=(x?O(c,E,v):O(v))||v);return x&&v&&P(c,E,v),v},"__decorateClass");let L=i(class extends HTMLElement{constructor(){super(...arguments);this.isCurrentVisible=!1,this.currentSelectionIndex=null,this.handleWindowResize=()=>{if(!this.virtualizedList)return;const t=this.isMobileViewport,c=this.windowHeight;this.updateViewportSize();const E=t!==this.isMobileViewport,x=c!==this.windowHeight;if(E){this.virtualizedList.destroy(),this.setupVirtualizedList();return}!this.isMobileViewport||!x||(this.listContainer.style.maxHeight=`${this.listHeight}px`,this.virtualizedList.resize(this.listHeight))},this.windowResized=()=>{this.resizeAnimationRequest&&cancelAnimationFrame(this.resizeAnimationRequest),this.resizeAnimationRequest=requestAnimationFrame(this.handleWindowResize)}}connectedCallback(){window.addEventListener("resize",this.windowResized),this.refType=this.getRequiredAttr("type")==="branch"?r.Branch:r.Tag;const t=this.getAttribute("current-committish");this.currentCommittish=t?atob(t):null,this.input=this.hasAttribute("initial-filter")&&this.currentCommittish||"",this.defaultBranch=atob(this.getRequiredAttr("default-branch")),this.nameWithOwner=atob(this.getRequiredAttr("name-with-owner")),this.canCreate=this.hasAttribute("can-create"),this.prefetchOnMouseover=this.hasAttribute("prefetch-on-mouseover");const c=this.getRequiredAttr("query-endpoint"),E=this.getRequiredAttr("cache-key");this.index=new T(this.refType,this,c,E,this.nameWithOwner),this.updateViewportSize(),this.setupFetchListeners()}disconnectedCallback(){this.resizeAnimationRequest&&cancelAnimationFrame(this.resizeAnimationRequest),window.removeEventListener("resize",this.windowResized)}updateViewportSize(){this.isMobileViewport=window.innerWidth<544,this.windowHeight=window.innerHeight}inputEntered(t){this.input=t.detail,this.render()}tabSelected(){this.index.fetchData()}renderTemplate(t,c){return new g.R(t,c,g.XK)}renderRow(t){const c=this.index.currentSearchResult[t];if(!c&&t>=this.listLength)return document.createElement("span");if(this.index.fetchFailed)return this.renderTemplate(this.fetchFailedTemplate,{index:t,refName:this.input});if(!c){const O=this.input===this.currentCommittish;return this.isCurrentVisible||(this.isCurrentVisible=O),this.renderTemplate(this.noMatchTemplate,{index:t,isCurrent:O,refName:this.input})}const E=this.input.length>0,x=E?"is-filtering":"",v=c===this.currentCommittish;this.isCurrentVisible||(this.isCurrentVisible=v);const D=this.renderTemplate(this.itemTemplate,{refName:c,index:t,isFilteringClass:x,urlEncodedRefName:this.urlEncodeRef(c),isCurrent:v,isNotDefault:c!==this.defaultBranch});if(E){const O=D.querySelector("span");O.textContent="";const j=c.split(this.input),V=j.length-1;for(let H=0;H<j.length;H++){const K=j[H];if(O.appendChild(document.createTextNode(K)),H<V){const B=document.createElement("b");B.textContent=this.input,O.appendChild(B)}}}return D}urlEncodeRef(t){return encodeURIComponent(t).replaceAll("%2F","/").replaceAll("%3A",":").replaceAll("%2B","+")}render(){if(this.currentSelectionIndex=null,!this.index.isLoading){if(!this.virtualizedList){this.index.search(this.input),this.setupVirtualizedList();return}this.listContainer.scrollTop=0,this.index.search(this.input),this.virtualizedList.setRowCount(this.listLength)}}get listHeight(){return this.isMobileViewport?this.windowHeight*.3:330}get listLength(){const t=this.index.currentSearchResult.length;return this.showCreateRow?t+1:t||1}get showCreateRow(){return!this.index.fetchFailed&&!this.index.exactMatchFound&&this.input!==""&&this.canCreate}getRequiredAttr(t,c=this){const E=c.getAttribute(t);if(!E)throw new Error(`Missing attribute for ${c}: ${t}`);return E}setupFetchListeners(){const t=this.closest("details");let c=!1;const E=i(()=>{c||(this.index.fetchData(),c=!0)},"fetch");if(!t||t.open){E();return}this.prefetchOnMouseover&&t.addEventListener("mouseover",E,{once:!0}),this.addEventListener("keydown",this.keydown),this.addEventListener("change",this.updateCurrent);const x=t.querySelector("input[data-ref-filter]");x&&(x.addEventListener("input",()=>{this.input=x.value,this.render()}),x.addEventListener("keydown",v=>{if(v.key==="ArrowDown"||v.key==="Tab")v.preventDefault(),v.stopPropagation(),this.focusFirstListMember();else if(v.key==="Enter"){let D=this.index.currentSearchResult.indexOf(this.input);if(D===-1)if(this.showCreateRow)D=this.listLength-1;else return;t.querySelector(`[data-index="${D}"]`).click(),v.preventDefault()}}))}focusFirstListMember(){!this.virtualizedList||(this.currentSelectionIndex=0,this.focusItemAtIndex(this.currentSelectionIndex))}updateCurrent(t){t.target instanceof HTMLInputElement&&t.target.checked&&t.target.value&&(this.currentCommittish=t.target.value)}keydown(t){if(this.currentSelectionIndex!==null){if(t.key==="Enter"){const c=document.activeElement;if(!c)return;c.click(),t.preventDefault();return}if(!(t.key==="Tab"&&t.shiftKey)&&t.key!=="Escape")switch(t.preventDefault(),t.stopPropagation(),t.key){case"ArrowUp":{this.currentSelectionIndex--,this.currentSelectionIndex<0&&(this.currentSelectionIndex=this.listLength-1),this.focusItemAtIndex(this.currentSelectionIndex);break}case"Home":{this.currentSelectionIndex=0,this.focusItemAtIndex(this.currentSelectionIndex);break}case"End":{this.currentSelectionIndex=this.listLength-1,this.focusItemAtIndex(this.currentSelectionIndex);break}case"Tab":case"ArrowDown":{this.currentSelectionIndex++,this.currentSelectionIndex>this.listLength-1&&(this.currentSelectionIndex=0),this.focusItemAtIndex(this.currentSelectionIndex);break}}}}focusItemAtIndex(t){this.virtualizedList.scrollToIndex(t,"center"),setTimeout(()=>{const c=this.listContainer.querySelector(`[data-index="${t}"]`);c&&c.focus()},20)}setupVirtualizedList(){this.listContainer.innerHTML="",this.listContainer.style.maxHeight=`${this.listHeight}px`,this.virtualizedList=new S.Z(this.listContainer,{height:this.listHeight,rowCount:this.listLength,renderRow:this.renderRow.bind(this),rowHeight:t=>{const c=this.isMobileViewport?54:33;return this.showCreateRow&&t===this.listLength-1?51:c},onRowsRendered:()=>{var t;this.hiddenCurrentElement&&(this.listContainer.removeChild(this.hiddenCurrentElement),delete this.hiddenCurrentElement),this.isCurrentVisible?this.isCurrentVisible=!1:this.hiddenCurrentItemTemplate&&(this.hiddenCurrentElement=document.createElement("div"),(t=this.hiddenCurrentElement)==null||t.appendChild(this.renderTemplate(this.hiddenCurrentItemTemplate,{refName:this.currentCommittish})),this.listContainer.appendChild(this.hiddenCurrentElement))},initialIndex:0,overscanCount:6}),this.virtualizedList.resize.bind(this.virtualizedList)}},"RefSelectorElement");y([b.fA],L.prototype,"listContainer",2),y([b.fA],L.prototype,"itemTemplate",2),y([b.fA],L.prototype,"noMatchTemplate",2),y([b.fA],L.prototype,"fetchFailedTemplate",2),y([b.fA],L.prototype,"hiddenCurrentItemTemplate",2),L=y([b.Ih],L)},90137:(I,_,h)=>{h.d(_,{j:()=>m,u:()=>p});function m(f){const u=f.closest("form");if(!(u instanceof HTMLFormElement))return;let l=p(u);if(f.name){const r=f.matches("input[type=submit]")?"Submit":"",d=f.value||r;l||(l=document.createElement("input"),l.type="hidden",l.classList.add("is-submit-button-value"),u.prepend(l)),l.name=f.name,l.value=d}else l&&l.remove()}i(m,"persistSubmitButtonValue");function p(f){const u=f.querySelector("input.is-submit-button-value");return u instanceof HTMLInputElement?u:null}i(p,"findPersistedSubmitButtonValue")},60785:(I,_,h)=>{h.d(_,{Z:()=>p});class m{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}}i(m,"NoOpStorage");function p(f,u={throwQuotaErrorsOnSet:!1},l=window){let r;try{r=l[f]}catch{r=new m}const{throwQuotaErrorsOnSet:d}=u;function T(S){try{return r.getItem(S)}catch{return null}}i(T,"getItem");function g(S,P){try{r.setItem(S,P)}catch(w){if(d&&w.message.toLowerCase().includes("quota"))throw w}}i(g,"setItem");function b(S){try{r.removeItem(S)}catch{}}return i(b,"removeItem"),{getItem:T,setItem:g,removeItem:b}}i(p,"safeStorage")},83476:(I,_,h)=>{h.d(_,{b:()=>u});var m=h(43452),p=h(34782);let f=[];function u(g,b=!1){g.timestamp===void 0&&(g.timestamp=new Date().getTime()),g.loggedIn=T(),f.push(g),b?d():r()}i(u,"sendStats");let l=null;async function r(){await p.C,l==null&&(l=window.requestIdleCallback(d))}i(r,"scheduleSendStats");function d(){var g,b;if(l=null,!f.length||(0,m.Z)(document))return;const S=(b=(g=document.head)==null?void 0:g.querySelector('meta[name="browser-stats-url"]'))==null?void 0:b.content;if(!S)return;const P=JSON.stringify({stats:f});try{navigator.sendBeacon&&navigator.sendBeacon(S,P)}catch{}f=[]}i(d,"flushStats");function T(){var g,b;return!!((b=(g=document.head)==null?void 0:g.querySelector('meta[name="user-login"]'))==null?void 0:b.content)}i(T,"isLoggedIn"),document.addEventListener("pagehide",d),document.addEventListener("visibilitychange",d)}},I=>{var _=i(m=>I(I.s=m),"__webpack_exec__");I.O(0,[5724,90,3878],()=>_(41830));var h=I.O()}]);})();

//# sourceMappingURL=codespaces-6e3c8270754f.js.map